<nz-row>
  <nz-col [nzMd]="4">
    <input nz-input type="text" [(ngModel)]="filter.text" placeholder="Filter by text"/>
  </nz-col>
  <nz-col [nzMd]="8" [nzOffset]="1">
    <nz-select nzMode="multiple"
               [nzMaxTagCount]="2"
               style="width: 100%;"
               nzPlaceHolder="Group"
               [(ngModel)]="filter.groups">
      <nz-option *ngFor="let option of groups" [nzLabel]="option.title" [nzValue]="option.id"></nz-option>
    </nz-select>
    <a href="https://gtaforums.com/topic/868526-ped-ids-structure" target="_blank">
      Understanding group names
    </a>
  </nz-col>
  <nz-col [nzMd]="2" [nzOffset]="1">
    <label nz-checkbox [(ngModel)]="filter.onlySpeech">
      Speech
    </label>
    <label nz-checkbox [(ngModel)]="filter.onlyEmpty">
      Empty
    </label>
    <label nz-checkbox [(ngModel)]="filter.onlyDoubtful">
      Doubtful
    </label>
  </nz-col>
  <nz-col [nzMd]="4">
    <button nz-button (click)="load(1)">
      Search
    </button>
  </nz-col>
</nz-row>

<nz-row>
  <nz-col>
    <nz-table #basicTable class="sounds-table"
              [nzLoading]="loading"
              [nzFrontPagination]="false"
              [nzData]="sounds?.data"
              nzPaginationPosition="both"
              [nzShowPagination]="true"
              [nzPageSize]="15"
              [(nzPageIndex)]="page"
              [(nzPageSize)]="pageSize"
              [nzShowTotal]="totalTemplate"
              (nzPageIndexChange)="load($event)"
              (nzPageSizeChange)="load($event)"
              [nzTotal]="total">
      <thead>
      <tr>
        <th>#</th>
        <th>Original Text</th>
        <th>Behavior</th>
        <th>Lang</th>
        <th>Translation</th>
        <th>Translation Accepted</th>
        <th>Group Name</th>
        <th>Is speech</th>
        <th>Gender</th>
        <th>Save</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let sound of basicTable.data" (click)="play(sound, $event)" [class.playing]="sound.playing">
        <td>
          {{ sound.id}}
        </td>
        <td>
          <textarea nz-input [(ngModel)]="sound.original_text"></textarea>
        </td>
        <td>{{sound.behavior}}</td>
        <td>{{sound.lang}}</td>
        <td>{{sound.translation}}</td>
        <td>{{sound.translation_accepted ? 'Yes' : 'No'}}</td>
        <td>
          <a (click)="showGroupInfo(sound.group, $event)">
            {{sound.group?.title}}
          </a>
        </td>
        <td>{{sound.is_speech ? 'Yes' : 'No'}}</td>
        <td>{{sound.gender}}</td>
        <td>
          <nz-spin [nzSpinning]="sound.saving">
            <a nz-button nzType="primary" (click)="save(sound)">
              Suggest
            </a>
          </nz-spin>
        </td>
      </tr>
      </tbody>
    </nz-table>

  </nz-col>
</nz-row>

<audio #audio></audio>

<ng-template #totalTemplate let-total>
  Total: {{ total }}
</ng-template>
